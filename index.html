        // --- AI LOGIC (DEBUG VERSION) ---
        async function askGroq(userText) {
            if(selfieVideo.style.display !== 'block') switchVideo('thinking');
            const now = new Date();
            const timeString = now.toLocaleTimeString('gu-IN', { hour: '2-digit', minute: '2-digit' });
            
            const systemPrompt = `
                તારું નામ 'વિદુષી' છે. સર્જક: દેવેન્દ્રભાઈ.
                નિયમો:
                1. તું સ્ત્રી છે. (શકતી, કરતી, ગઈ હતી).
                2. દેવેન્દ્રભાઈનો નંબર 9276505035 છે.
                3. શુદ્ધ ગુજરાતીમાં જવાબ આપવો.
                વર્તમાન સમય: ${timeString}.
            `;

            let messagesToSend = [{ role: "system", content: systemPrompt }, ...chatHistory.slice(-10)];
            messagesToSend.push({ role: "user", content: userText });

            try {
                // ચેક કરો કે કી છે કે નહિ
                if(!apiKey) throw new Error("API Key નથી! સેટિંગ્સમાં નાખો.");

                const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST", headers: { "Content-Type": "application/json", "Authorization": `Bearer ${apiKey}` },
                    body: JSON.stringify({ model: currentModel, messages: messagesToSend, max_tokens: 450 })
                });

                const data = await response.json();
                
                // જો API તરફથી એરર આવે તો
                if (data.error) throw new Error(data.error.message);

                if (data.choices && data.choices[0]) {
                    const reply = data.choices[0].message.content;
                    chatHistory.push({ role: "user", content: userText });
                    chatHistory.push({ role: "assistant", content: reply });
                    localStorage.setItem('vidushi_memory', JSON.stringify(chatHistory));

                    if (reply.includes("[IMAGE:")) {
                        const imgPrompt = reply.match(/\[IMAGE: (.*?)\]/)[1];
                        showImage(imgPrompt);
                        speak("આ રહ્યું ચિત્ર.");
                    } else {
                        speak(reply);
                    }
                }
            } catch (error) { 
                statusText.innerText = "Error"; 
                // અહી તમને સ્ક્રીન પર એરર દેખાશે
                alert("ભૂલ આવી છે: " + error.message); 
                speak("ક્ષમા કરજો, કઈક પ્રોબ્લેમ થયો છે."); 
                isProcessing = false; 
            }
        }
